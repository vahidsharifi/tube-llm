<!DOCTYPE html>
<html>
<head>
    <title>Question Answering App</title>
</head>
<body>
    <h1>Question Answering App</h1>
    <div>
        <form onsubmit="submitQuestion(event)">
            <label for="question">Enter your question:</label>
            <input type="text" id="question" name="question" />
            <button type="submit">Get Answer</button>
        </form>
    </div>
    <div id="answerSection" style="display: none;">
        <h2>Answer:</h2>
        <p id="answer"></p>
    </div>
    <div id="sourcesSection" style="display: none;">
        <h2>Sources:</h2>
        <ul id="sources"></ul>
    </div>

    <script>
        function submitQuestion(event) {
            event.preventDefault();
            const question = document.getElementById('question').value;
            getAnswer(question);
        }

        function getAnswer(question) {
            fetch(`/answer/?question=${encodeURIComponent(question)}`)
                .then(response => response.json())
                .then(data => {
                    const answerElement = document.getElementById('answer');
                    answerElement.textContent = data.answer;

                    const sourcesElement = document.getElementById('sources');
                    sourcesElement.innerHTML = ""; // Clear existing sources

                    // Display sources as list items in the <ul> element
                    data.sources.forEach(source => {
                        const listItem = document.createElement('li');
                        const link = document.createElement('a');
                        link.href = source;
                        link.textContent = source;
                        listItem.appendChild(link);
                        sourcesElement.appendChild(listItem);
                    });

                    // Show the "Answer:" and "Sources:" sections
                    const answerSection = document.getElementById('answerSection');
                    const sourcesSection = document.getElementById('sourcesSection');
                    answerSection.style.display = 'block';
                    sourcesSection.style.display = 'block';
                })
                .catch(error => {
                    console.error('Error fetching answer:', error);
                    const answerElement = document.getElementById('answer');
                    answerElement.textContent = 'Error fetching answer. Please try again later.';
                });
        }
    </script>
</body>
</html>
